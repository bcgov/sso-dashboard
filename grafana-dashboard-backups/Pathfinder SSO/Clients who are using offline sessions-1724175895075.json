{
  "__inputs": [
    {
      "name": "DS_SSO_LOKI",
      "label": "SSO Loki",
      "description": "",
      "type": "datasource",
      "pluginId": "loki",
      "pluginName": "Loki"
    },
    {
      "name": "DS_SSO_KEYCLOAK DEV",
      "label": "SSO Keycloak Dev",
      "description": "",
      "type": "datasource",
      "pluginId": "postgres",
      "pluginName": "PostgreSQL"
    },
    {
      "name": "DS_SSO_KEYCLOAK TEST",
      "label": "SSO Keycloak Test",
      "description": "",
      "type": "datasource",
      "pluginId": "postgres",
      "pluginName": "PostgreSQL"
    },
    {
      "name": "DS_SSO_KEYCLOAK PROD",
      "label": "SSO Keycloak Prod",
      "description": "",
      "type": "datasource",
      "pluginId": "postgres",
      "pluginName": "PostgreSQL"
    }
  ],
  "__elements": {},
  "__requires": [
    {
      "type": "grafana",
      "id": "grafana",
      "name": "Grafana",
      "version": "10.2.2"
    },
    {
      "type": "datasource",
      "id": "loki",
      "name": "Loki",
      "version": "1.0.0"
    },
    {
      "type": "datasource",
      "id": "postgres",
      "name": "PostgreSQL",
      "version": "1.0.0"
    },
    {
      "type": "panel",
      "id": "table",
      "name": "Table",
      "version": ""
    },
    {
      "type": "panel",
      "id": "text",
      "name": "Text",
      "version": ""
    }
  ],
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "grafana",
          "uid": "-- Grafana --"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "target": {
          "limit": 100,
          "matchAny": false,
          "tags": [],
          "type": "dashboard"
        },
        "type": "dashboard"
      }
    ]
  },
  "description": "these are THE users counts currently (confirm description)",
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": null,
  "links": [],
  "liveNow": false,
  "panels": [
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 29,
      "panels": [
        {
          "datasource": {
            "type": "loki",
            "uid": "${DS_SSO_LOKI}"
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 1
          },
          "id": 18,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "With our service, we capture two things:\n1. Active Sessions via the cron job process https://sso-grafana.apps.gold.devops.gov.bc.ca/d/edff7318-49f9-4cdd-a66c-11f49357c79e/active-sessions-and-sso-logs\n2. Additional session settings: configurable via SSO Admin access on the UI https://sso-grafana.apps.gold.devops.gov.bc.ca/d/oX8hrKNIz/0e57c30a-ae80-52a4-b096-3bb811322139?orgId=1\n3. Custom Query to view the current user sessions in keycloak this time (this dashboard) ",
            "mode": "markdown"
          },
          "pluginVersion": "10.2.2",
          "title": "Offline Sessions",
          "type": "text"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "${DS_SSO_LOKI}"
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 1
          },
          "id": 19,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "Thinking at this time ( Jan 15, 2024)\r\n\r\nLet's keep in line with OCIO standards to be within 30 mins. This means for those clients having user sessions for more than 30 mins, we can build community relations (not necessarily be the police) and advise on best practices.\r\n\r\nthe way to see the offline sessions is to go in the keycloak db or ui for the client and go to the offline access. you can see the offline access, which is approx 30 days ",
            "mode": "markdown"
          },
          "pluginVersion": "10.2.2",
          "title": "Our service/policy",
          "type": "text"
        }
      ],
      "title": "Background info",
      "type": "row"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 1
      },
      "id": 24,
      "panels": [],
      "title": "STANDARD",
      "type": "row"
    },
    {
      "datasource": {
        "type": "loki",
        "uid": "${DS_SSO_LOKI}"
      },
      "gridPos": {
        "h": 8,
        "w": 21,
        "x": 0,
        "y": 2
      },
      "id": 23,
      "options": {
        "code": {
          "language": "plaintext",
          "showLineNumbers": false,
          "showMiniMap": false
        },
        "content": "\r\n\r\nApril 2024: \r\nOffline Max value will be set to 60 days. this will be a safe number for those clients below as we've already spoken to them. through the analysis over the last few months, no one is going past the 60 day mark zs\r\nFeb 13: \r\n1) settings changed for Roadsafety integraiton in dev/test. need to follow up next week on prod\r\n2) aps team will be looking to make their changes to remove the scope by end of week. follow up next week\r\n3) era-r-2-4534 - went into a deep sleep; handed over to an AMS team. due to limitation of angular library or needed better control of refresh token. Yossi will look into this and we should follow May.\r\n4) spd-screening-portal-4830 is not in production. Yossi and team can look at it right now. will be moving to an AG custom realm. Go live is in May. \r\n5) bc-data-catalogue-3863 - alan to investigate in remove the offline from scope\r\n6) dip-3830 - Justin and Aidan will work on it and get back\r\n7) hydrological-alerting-5261 - they are in dev mode only, fairly new. need to give time to see if it comes in test/prod\r\n\r\nFeb 8, 2024: plan to chat with standard service first.\r\n",
        "mode": "markdown"
      },
      "pluginVersion": "10.2.2",
      "title": "Notes",
      "type": "text"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 10
      },
      "id": 13,
      "panels": [],
      "title": "OfflineClientSessionAnalysis",
      "type": "row"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "${DS_SSO_KEYCLOAK DEV}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 7,
        "x": 0,
        "y": 11
      },
      "id": 21,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK DEV}"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "rawSql": "SELECT\r\n  count (*),\r\n  MAX  (\"Client\".\"client_id\" ) As \"Client_ID\",\r\n  MAX (\"Client\".\"realm_id\") as \"Realm_ID\",\r\n  \"public\".\"offline_client_session\".\"client_id\" AS \"client_identifier\"\r\n\r\nFROM\r\n  \"public\".\"offline_client_session\"\r\n \r\nLEFT JOIN \"public\".\"client\" AS \"Client\" ON \"public\".\"offline_client_session\".\"client_id\" = \"Client\".\"id\" WHERE \"Client\".\"realm_id\" in ('standard')\r\n\r\ngroup by \"public\".\"offline_client_session\".\"client_id\"\r\norder by count (*) desc",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "DEV",
      "type": "table"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "${DS_SSO_KEYCLOAK TEST}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 6,
        "x": 7,
        "y": 11
      },
      "id": 22,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK TEST}"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "rawSql": "SELECT\r\n  count (*),\r\n  MAX  (\"Client\".\"client_id\" ) As \"Client_ID\",\r\n  MAX (\"Client\".\"realm_id\") as \"Realm_ID\",\r\n  \"public\".\"offline_client_session\".\"client_id\" AS \"client_identifier\"\r\n\r\nFROM\r\n  \"public\".\"offline_client_session\"\r\n \r\nLEFT JOIN \"public\".\"client\" AS \"Client\" ON \"public\".\"offline_client_session\".\"client_id\" = \"Client\".\"id\" WHERE \"Client\".\"realm_id\" in ('standard')\r\n\r\ngroup by \"public\".\"offline_client_session\".\"client_id\"\r\norder by count (*) desc",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "TEST",
      "type": "table"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "${DS_SSO_KEYCLOAK PROD}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 6,
        "x": 13,
        "y": 11
      },
      "id": 20,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK PROD}"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "rawSql": "SELECT\r\n  count (*),\r\n  MAX  (\"Client\".\"client_id\" ) As \"Client_ID\",\r\n  MAX (\"Client\".\"realm_id\") as \"Realm_ID\",\r\n  \"public\".\"offline_client_session\".\"client_id\" AS \"client_identifier\"\r\n\r\nFROM\r\n  \"public\".\"offline_client_session\"\r\n \r\nLEFT JOIN \"public\".\"client\" AS \"Client\" ON \"public\".\"offline_client_session\".\"client_id\" = \"Client\".\"id\" WHERE \"Client\".\"realm_id\" in ('standard')\r\n\r\ngroup by \"public\".\"offline_client_session\".\"client_id\"\r\norder by count (*) desc",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "PROD",
      "type": "table"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "${DS_SSO_KEYCLOAK DEV}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "filterable": true,
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 14,
        "x": 0,
        "y": 18
      },
      "id": 39,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": []
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK DEV}"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "rawSql": "select c.client_id,ue.username, to_timestamp(u.created_on) as token_creation_date, to_timestamp(u.last_session_refresh) as last_time_refreshed, \r\ndate(now())-to_timestamp(u.created_on)  as token_age, to_timestamp(u.last_session_refresh) < to_timestamp(u.created_on) as is_refresh_smaller_than_created\r\nfrom offline_client_session of, client c, offline_user_session u, user_entity ue\r\nwhere ue.id = u.user_id AND of.client_id = c.id\r\nand of.user_session_id = u.user_session_id\r\nand c.realm_id in ('standard')\r\n\r\norder by u.created_on asc",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "DEV offline like KC UI- USERS",
      "type": "table"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "${DS_SSO_KEYCLOAK DEV}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "filterable": true,
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 7,
        "x": 0,
        "y": 26
      },
      "id": 42,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK DEV}"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "rawSql": "select c.client_id, count (*)\r\nfrom offline_client_session of, client c, offline_user_session u\r\nwhere of.client_id = c.id\r\nand of.user_session_id = u.user_session_id\r\nand c.realm_id in ('standard')\r\nand  to_timestamp(u.last_session_refresh) < to_timestamp(u.created_on) \r\ngroup by c.client_id\r\n\r\n",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "DEV offline refresh smaller than created",
      "type": "table"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "${DS_SSO_KEYCLOAK DEV}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "filterable": true,
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 7,
        "x": 7,
        "y": 26
      },
      "id": 43,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true
      },
      "pluginVersion": "10.2.2",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK DEV}"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "rawSql": "select c.client_id, count (*)\r\nfrom offline_client_session of, client c, offline_user_session u\r\nwhere of.client_id = c.id\r\nand of.user_session_id = u.user_session_id\r\nand c.realm_id in ('standard')\r\nand  to_timestamp(u.last_session_refresh) >= to_timestamp(u.created_on) \r\ngroup by c.client_id\r\n\r\n",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "DEV offline refresh biggerthan created",
      "type": "table"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 31
      },
      "id": 4,
      "panels": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK DEV}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 0,
            "y": 4
          },
          "id": 2,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK DEV}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT count(*) AS \"count\",\"Offline User Session\".\"realm_id\" AS \"realm_id\"\r\nFROM \"public\".\"offline_client_session\"\r\nLEFT JOIN \"public\".\"offline_user_session\" \"Offline User Session\" ON \"public\".\"offline_client_session\".\"user_session_id\" = \"Offline User Session\".\"user_session_id\" where \"Offline User Session\".\"realm_id\" IN ('standard')\r\nGROUP BY \"Offline User Session\".\"realm_id\"\r\nORDER BY \"Offline User Session\".\"realm_id\" ASC",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Offline_client_sessions DEV",
          "type": "table"
        },
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK TEST}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 6,
            "y": 4
          },
          "id": 5,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK TEST}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT \"Offline User Session\".\"realm_id\" AS \"realm_id\", count(*) AS \"count\"\r\nFROM \"public\".\"offline_client_session\"\r\nLEFT JOIN \"public\".\"offline_user_session\" \"Offline User Session\" ON \"public\".\"offline_client_session\".\"user_session_id\" = \"Offline User Session\".\"user_session_id\" WHERE \"Offline User Session\".\"realm_id\" IN ('standard')\r\nGROUP BY \"Offline User Session\".\"realm_id\"\r\nORDER BY \"Offline User Session\".\"realm_id\" ASC",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Offline_client_sessions TEST",
          "type": "table"
        },
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK PROD}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 8,
            "x": 12,
            "y": 4
          },
          "id": 6,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK PROD}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT \"Offline User Session\".\"realm_id\" AS \"realm_id\", count(*) AS \"count\"\r\nFROM \"public\".\"offline_client_session\"\r\nLEFT JOIN \"public\".\"offline_user_session\" \"Offline User Session\" ON \"public\".\"offline_client_session\".\"user_session_id\" = \"Offline User Session\".\"user_session_id\" WHERE \"Offline User Session\".\"realm_id\" IN ('standard')\r\nGROUP BY \"Offline User Session\".\"realm_id\"\r\nORDER BY \"Offline User Session\".\"realm_id\" ASC",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Offline_client_sessions PROD",
          "type": "table"
        }
      ],
      "title": "Offline User Session__realm_id ",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 32
      },
      "id": 8,
      "panels": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK DEV}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 0,
            "y": 7
          },
          "id": 9,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK DEV}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "select count (*), \"offline_user_session\".\"realm_id\" \r\nFROM \"public\".\"offline_user_session\"\r\nwhere \"offline_user_session\".\"realm_id\" in ('standard')\r\nGROUP BY \"offline_user_session\".\"realm_id\" \r\nORDER BY \"offline_user_session\".\"realm_id\"  ASC",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "DEV",
          "type": "table"
        },
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK TEST}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 5,
            "x": 6,
            "y": 7
          },
          "id": 10,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK TEST}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "select count (*), \"offline_user_session\".\"realm_id\" \r\nFROM \"public\".\"offline_user_session\"\r\nwhere \"offline_user_session\".\"realm_id\" in ('standard')\r\nGROUP BY \"offline_user_session\".\"realm_id\" \r\nORDER BY \"offline_user_session\".\"realm_id\"  ASC",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "TEST",
          "type": "table"
        },
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK PROD}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 11,
            "y": 7
          },
          "id": 11,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK PROD}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "select count (*), \"offline_user_session\".\"realm_id\" \r\nFROM \"public\".\"offline_user_session\"\r\nwhere \"offline_user_session\".\"realm_id\" in ('standard')\r\nGROUP BY \"offline_user_session\".\"realm_id\" \r\nORDER BY \"offline_user_session\".\"realm_id\"  ASC",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "PROD",
          "type": "table"
        }
      ],
      "title": "offline_user_session",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 33
      },
      "id": 25,
      "panels": [],
      "title": "CUSTOM",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 34
      },
      "id": 26,
      "panels": [
        {
          "datasource": {
            "type": "loki",
            "uid": "${DS_SSO_LOKI}"
          },
          "gridPos": {
            "h": 5,
            "w": 21,
            "x": 0,
            "y": 7
          },
          "id": 44,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "Feb 23 2024:\r\n\r\n\r\nDEVINT_SAJE_BCEID_BASIC - working session leo removed in dev.\r\n\r\noes-wbc-dev  - workbces branko will look into this. aim to follow up by end of march",
            "mode": "markdown"
          },
          "pluginVersion": "10.2.2",
          "title": "Notes",
          "type": "text"
        },
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK DEV}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 7,
            "x": 0,
            "y": 12
          },
          "id": 30,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK DEV}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT\r\n  count (*),\r\n  MAX  (\"Client\".\"client_id\" ) As \"Client_ID\",\r\n  MAX (\"Client\".\"realm_id\") as \"Realm_ID\",\r\n  \"public\".\"offline_client_session\".\"client_id\" AS \"client_identifier\"\r\n\r\nFROM\r\n  \"public\".\"offline_client_session\"\r\n \r\nLEFT JOIN \"public\".\"client\" AS \"Client\" ON \"public\".\"offline_client_session\".\"client_id\" = \"Client\".\"id\" WHERE \"Client\".\"realm_id\" NOT IN ('standard')\r\n\r\ngroup by \"public\".\"offline_client_session\".\"client_id\"\r\norder by count (*) desc",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "DEV",
          "type": "table"
        },
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK TEST}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 7,
            "x": 7,
            "y": 12
          },
          "id": 31,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK TEST}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT\r\n  count (*),\r\n  MAX  (\"Client\".\"client_id\" ) As \"Client_ID\",\r\n  MAX (\"Client\".\"realm_id\") as \"Realm_ID\",\r\n  \"public\".\"offline_client_session\".\"client_id\" AS \"client_identifier\"\r\n\r\nFROM\r\n  \"public\".\"offline_client_session\"\r\n \r\nLEFT JOIN \"public\".\"client\" AS \"Client\" ON \"public\".\"offline_client_session\".\"client_id\" = \"Client\".\"id\" WHERE \"Client\".\"realm_id\" NOT IN ('standard')\r\n\r\ngroup by \"public\".\"offline_client_session\".\"client_id\"\r\norder by count (*) desc",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "TEST",
          "type": "table"
        },
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK PROD}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 7,
            "x": 14,
            "y": 12
          },
          "id": 32,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK PROD}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT\r\n  count (*),\r\n  MAX  (\"Client\".\"client_id\" ) As \"Client_ID\",\r\n  MAX (\"Client\".\"realm_id\") as \"Realm_ID\",\r\n  \"public\".\"offline_client_session\".\"client_id\" AS \"client_identifier\"\r\n\r\nFROM\r\n  \"public\".\"offline_client_session\"\r\n \r\nLEFT JOIN \"public\".\"client\" AS \"Client\" ON \"public\".\"offline_client_session\".\"client_id\" = \"Client\".\"id\" WHERE \"Client\".\"realm_id\" NOT IN ('standard')\r\n\r\ngroup by \"public\".\"offline_client_session\".\"client_id\"\r\norder by count (*) desc",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "PROD",
          "type": "table"
        }
      ],
      "title": "offline client sessions  - custom realms",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 35
      },
      "id": 27,
      "panels": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK DEV}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 5,
            "x": 0,
            "y": 10
          },
          "id": 33,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK DEV}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT count(*) AS \"count\",\"Offline User Session\".\"realm_id\" AS \"realm_id\"\r\nFROM \"public\".\"offline_client_session\"\r\nLEFT JOIN \"public\".\"offline_user_session\" \"Offline User Session\" ON \"public\".\"offline_client_session\".\"user_session_id\" = \"Offline User Session\".\"user_session_id\" \r\nwhere \"Offline User Session\".\"realm_id\" NOT IN ('standard')\r\nGROUP BY \"Offline User Session\".\"realm_id\"\r\nORDER BY count(*) desc",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Offline_client_sessions DEV",
          "type": "table"
        },
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK TEST}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 5,
            "x": 5,
            "y": 10
          },
          "id": 34,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK TEST}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT count(*) AS \"count\",\"Offline User Session\".\"realm_id\" AS \"realm_id\"\r\nFROM \"public\".\"offline_client_session\"\r\nLEFT JOIN \"public\".\"offline_user_session\" \"Offline User Session\" ON \"public\".\"offline_client_session\".\"user_session_id\" = \"Offline User Session\".\"user_session_id\" \r\nwhere \"Offline User Session\".\"realm_id\" NOT IN ('standard')\r\nGROUP BY \"Offline User Session\".\"realm_id\"\r\nORDER BY count(*) desc",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Offline_client_sessions TEST",
          "type": "table"
        },
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK PROD}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 5,
            "x": 10,
            "y": 10
          },
          "id": 35,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK PROD}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT count(*) AS \"count\",\"Offline User Session\".\"realm_id\" AS \"realm_id\"\r\nFROM \"public\".\"offline_client_session\"\r\nLEFT JOIN \"public\".\"offline_user_session\" \"Offline User Session\" ON \"public\".\"offline_client_session\".\"user_session_id\" = \"Offline User Session\".\"user_session_id\" \r\nwhere \"Offline User Session\".\"realm_id\" NOT IN ('standard')\r\nGROUP BY \"Offline User Session\".\"realm_id\"\r\nORDER BY count(*) desc",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Offline_client_sessions PROD",
          "type": "table"
        }
      ],
      "title": "offline user sessions__realmID - custom realm",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 36
      },
      "id": 28,
      "panels": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK DEV}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 9
          },
          "id": 36,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK DEV}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "select count (*), \"offline_user_session\".\"realm_id\" \r\nFROM \"public\".\"offline_user_session\"\r\nwhere \"offline_user_session\".\"realm_id\" NOT IN ('standard')\r\nGROUP BY \"offline_user_session\".\"realm_id\" \r\nORDER BY count (*) DESC",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "DEV",
          "type": "table"
        },
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK TEST}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 6,
            "y": 9
          },
          "id": 37,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK TEST}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "select count (*), \"offline_user_session\".\"realm_id\" \r\nFROM \"public\".\"offline_user_session\"\r\nwhere \"offline_user_session\".\"realm_id\" NOT IN ('standard')\r\nGROUP BY \"offline_user_session\".\"realm_id\" \r\nORDER BY count (*) DESC",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "TEST",
          "type": "table"
        },
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK PROD}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 12,
            "y": 9
          },
          "id": 38,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK PROD}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "select count (*), \"offline_user_session\".\"realm_id\" \r\nFROM \"public\".\"offline_user_session\"\r\nwhere \"offline_user_session\".\"realm_id\" NOT IN ('standard')\r\nGROUP BY \"offline_user_session\".\"realm_id\" \r\nORDER BY count (*) DESC",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "PROD",
          "type": "table"
        }
      ],
      "title": "offline user sessions custom realms",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 37
      },
      "id": 41,
      "panels": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "${DS_SSO_KEYCLOAK DEV}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 11,
            "w": 12,
            "x": 0,
            "y": 22
          },
          "id": 40,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "postgres",
                "uid": "${DS_SSO_KEYCLOAK DEV}"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "select c.client_id, c.realm_id, min(to_timestamp((of.data::json -> 'notes' ->> 'startedAt')::bigint)) as first_time_client_ever_created_token\r\nfrom offline_client_session of, client c\r\nwhere of.client_id = c.id\r\ngroup by c.client_id, c.realm_id\r\norder by first_time_client_ever_created_token asc",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "DEV first time used by client",
          "type": "table"
        }
      ],
      "title": "Nice to know for SSO team",
      "type": "row"
    }
  ],
  "refresh": "",
  "schemaVersion": 38,
  "tags": [],
  "templating": {
    "list": []
  },
  "time": {
    "from": "now-6h",
    "to": "now"
  },
  "timepicker": {},
  "timezone": "",
  "title": "Clients who are using offline sessions",
  "uid": "OfAWXhNSk",
  "version": 56,
  "weekStart": ""
}
